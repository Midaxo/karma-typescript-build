{"version":3,"file":"extender.js","sourceRoot":"","sources":["../../src/shared/extender.ts"],"names":[],"mappings":";;;AAAA,+BAAiC;AAEjC,sCAAyC;AAOzC;IAAA;IA+BA,CAAC;IA7BiB,eAAM,GAApB,UAAqB,GAAW,EAAE,QAAa,EAAE,qBAA4C;QAEzF,IAAM,UAAU,GAAG,qBAAqB,CAAC,GAAG,CAAe,CAAC;QAE5D,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;YAC3B,IAAM,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,UAAsB,CAAC,CAAC;YACjE,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;SAC9C;QAED,IAAI,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;YAC7B,IAAI,UAAU,CAAC,IAAI,KAAK,SAAS,EAAE;gBAC/B,QAAQ,CAAC,GAAG,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC;aACrC;YACD,IAAI,UAAU,CAAC,IAAI,KAAK,OAAO,EAAE;gBAC7B,IAAM,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;gBAC5D,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;aAC9C;YACD,OAAO;SACV;IACL,CAAC;IAEc,wBAAe,GAA9B,UAA+B,IAAc;QACzC,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;YACrB,OAAO,IAAI,CAAC,GAAG,CAAC,UAAC,IAAY;gBACzB,OAAO,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YACzC,CAAC,CAAC,CAAC;SACN;QACD,OAAO,EAAE,CAAC;IACd,CAAC;IACL,eAAC;AAAD,CAAC,AA/BD,IA+BC;AA/BY,4BAAQ","sourcesContent":["import * as lodash from \"lodash\";\r\n\r\nimport PathTool = require(\"./path-tool\");\r\n\r\nimport {\r\n    Extendable,\r\n    KarmaTypescriptConfig\r\n} from \"../api\";\r\n\r\nexport class Extender {\r\n\r\n    public static extend(key: string, tsconfig: any, karmaTypescriptConfig: KarmaTypescriptConfig): void {\r\n\r\n        const extendable = karmaTypescriptConfig[key] as Extendable;\r\n\r\n        if (Array.isArray(extendable)) {\r\n            const list = lodash.union(tsconfig[key], extendable as string[]);\r\n            tsconfig[key] = this.fixWindowsPaths(list);\r\n        }\r\n\r\n        if (lodash.isObject(extendable)) {\r\n            if (extendable.mode === \"replace\") {\r\n                tsconfig[key] = extendable.values;\r\n            }\r\n            if (extendable.mode === \"merge\") {\r\n                const list = lodash.union(tsconfig[key], extendable.values);\r\n                tsconfig[key] = this.fixWindowsPaths(list);\r\n            }\r\n            return;\r\n        }\r\n    }\r\n\r\n    private static fixWindowsPaths(list: string[]): string[] {\r\n        if (list && list.length) {\r\n            return list.map((item: string) => {\r\n                return PathTool.fixWindowsPath(item);\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\n"]}